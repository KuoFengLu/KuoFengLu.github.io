<html><head><base href="." /><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Michroma&display=swap');

body {
    margin: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: radial-gradient(circle at center, #1a0033, #000033, #000);
    font-family: Arial, sans-serif;
    overflow: hidden;
}

.background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.aurora {
    position: absolute;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        45deg,
        rgba(0, 255, 127, 0.3),
        rgba(0, 255, 255, 0.3),
        rgba(148, 0, 211, 0.3)
    );
    filter: blur(50px);
    animation: auroraFlow 15s linear infinite;
}

@keyframes auroraFlow {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

.shooting-star {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: linear-gradient(45deg, #fff, transparent);
    animation: shootingStarAnimation 2s linear infinite;
    opacity: 0;
    box-shadow: 
        0 0 0 4px rgba(255,255,255,0.1),
        0 0 0 8px rgba(255,255,255,0.1);
}

@keyframes shootingStarAnimation {
    0% {
        transform: translate(0, 0) rotate(45deg);
        opacity: 1;
    }
    100% {
        transform: translate(-200px, 200px) rotate(45deg);
        opacity: 0;
    }
}

.star {
    position: absolute;
    border-radius: 50%;
    animation: twinkle 1.5s infinite alternate;
    background: linear-gradient(45deg, 
        rgba(255,255,255,1), 
        rgba(135,206,235,0.8),
        rgba(255,182,193,0.8)
    );
}

@keyframes twinkle {
    0% { opacity: 0.2; }
    100% { opacity: 1; }
}

.grid {
    position: fixed;
    width: 200%;
    height: 200%;
    background: 
        linear-gradient(transparent 0%, rgba(0, 255, 255, 0.1) 1%, transparent 2%),
        linear-gradient(90deg, transparent 0%, rgba(0, 255, 255, 0.1) 1%, transparent 2%);
    background-size: 100px 100px;
    transform: translate(-25%, -25%) rotate(15deg);
    animation: gridMove 20s linear infinite;
}

@keyframes gridMove {
    0% { transform: translate(-25%, -25%) rotate(15deg); }
    100% { transform: translate(-75%, -75%) rotate(15deg); }
}

.loading-container {
    position: relative;
    width: 240px;
    height: 240px;
}

.sound-waves {
    position: absolute;
    width: 300px;
    height: 300px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
}

.wave {
    position: absolute;
    width: 100%;
    height: 100%;
    border: 2px solid rgba(0, 255, 255, 0.2);
    border-radius: 50%;
    animation: waveExpand 2s linear infinite;
}

.wave:nth-child(2) {
    animation-delay: 0.3s; /* Reduced from 0.5s */
}

.wave:nth-child(3) {
    animation-delay: 0.6s; /* Reduced from 1s */
}

@keyframes waveExpand {
    0% {
        transform: scale(0.8);
        opacity: 0.8;
    }
    100% {
        transform: scale(1.2);
        opacity: 0;
    }
}

.glass {
    position: relative;
    width: 240px;
    height: 240px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    overflow: hidden;
    background: 
        radial-gradient(circle at 30% 30%,
            rgba(255, 255, 255, 0.1),
            rgba(0, 0, 0, 0.8)
        );
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.3),
                inset 0 0 20px rgba(0, 255, 255, 0.2);
}

.earth-texture {
    position: absolute;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 50% 50%,
            #333 0%,
            #222 50%,
            #111 100%
        );
    mix-blend-mode: overlay;
}

.liquid {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 0%;
    background: linear-gradient(180deg, 
        rgba(0, 120, 255, 0.8),
        rgba(0, 180, 255, 0.8)
    );
    transition: height 0.5s ease;
    z-index: 1; 
    overflow: hidden;
}

.liquid::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 200%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.2),
        transparent
    );
    animation: shimmer 3s linear infinite;
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(50%); }
}

.liquid::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 0;
    width: 200%;
    height: 20px;
    background: inherit;
    animation: waveAnimation 3s linear infinite;
}
.liquid::after {
    content: '';
    position: absolute;
    top: -8px;
    left: -50%;
    width: 200%;
    height: 16px;
    background: inherit;
    animation: waveAnimation 4s linear infinite;
    animation-delay: -1s;
}

@keyframes waveAnimation {
    0% {
        transform: translate(-50%, 0) rotateZ(0deg);
    }
    50% {
        transform: translate(-25%, -2px) rotateZ(0deg);
    }
    100% {
        transform: translate(0%, 0) rotateZ(0deg);
    }
}

.continents {
    position: absolute;
    width: 100%;
    height: 100%;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23117733' d='M20,40 C25,35 30,38 35,35 C40,32 45,30 50,32 C55,34 60,30 65,35 C70,40 75,38 80,42 C75,45 70,48 65,50 C60,52 55,55 50,53 C45,51 40,54 35,52 C30,50 25,48 20,40 Z'/%3E%3Cpath fill='%23117733' d='M30,60 C35,58 40,62 45,60 C50,58 55,55 60,58 C65,61 70,58 75,62 C70,65 65,68 60,70 C55,72 50,70 45,68 C40,66 35,64 30,60 Z'/%3E%3Cpath fill='%23117733' d='M50,20 C55,18 60,22 65,20 C70,18 75,15 80,18 C75,21 70,24 65,25 C60,26 55,24 50,20 Z'/%3E%3C/svg%3E");
    background-size: cover;
    mix-blend-mode: overlay;
    opacity: 0.8;
}

.overflow {
    position: absolute;
    width: 140%;
    left: -20%;
    height: 50px;
    bottom: -50px;
    opacity: 0;
    background: linear-gradient(180deg, 
        rgba(0, 120, 255, 0.8),
        rgba(0, 180, 255, 0.8)
    );
    border-radius: 50%;
    filter: blur(3px);
    transform-origin: center top;
    animation: overflow 4s ease-out forwards;
    animation-play-state: paused;
    box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
}

@keyframes overflow {
    0% {
        transform: scaleY(0);
        opacity: 0;
    }
    100% {
        transform: scaleY(1);
        opacity: 0.7;
    }
}

.title {
    position: absolute;
    top: -120px;
    width: 300px;
    left: 50%;
    transform: translateX(-50%);
    color: #fff;
    font-size: 32px;
    text-align: center;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    text-shadow: 
        0 0 10px rgba(0, 255, 255, 0.5),
        0 0 20px rgba(0, 255, 255, 0.3),
        0 0 30px rgba(0, 255, 255, 0.2);
    letter-spacing: 2px;
    white-space: nowrap;
    animation: titleColorChange 6s linear infinite;
}

.subtitle {
    position: absolute;
    top: -80px;
    width: 300px;
    left: 50%;
    transform: translateX(-50%);
    color: #fff;
    font-size: 24px;
    text-align: center;
    font-family: 'Michroma', sans-serif;
    text-shadow: 
        0 0 10px rgba(0, 255, 255, 0.5),
        0 0 20px rgba(0, 255, 255, 0.3),
        0 0 30px rgba(0, 255, 255, 0.2);
    letter-spacing: 1px;
    white-space: nowrap;
    animation: titleColorChange 6s linear infinite;
    animation-delay: 1s; /* Slight delay for subtitle to create wave effect */
}

/* Add new keyframes for title color change */
@keyframes titleColorChange {
    0% {
        color: #ffffff;
        text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
    }
    33% {
        color: #00ffcc;
        text-shadow: 0 0 10px rgba(0, 255, 204, 0.5);
    }
    66% {
        color: #ff69b4;
        text-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
    }
    100% {
        color: #ffffff;
        text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
    }
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.earth-container {
    position: absolute;
    width: 100%;
    height: 100%;
}

@keyframes rotateEarth {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.earth-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: 
        linear-gradient(to right, transparent 49.5%, rgba(255,255,255,0.3) 50%, transparent 50.5%),
        linear-gradient(transparent 49.5%, rgba(255,255,255,0.3) 50%, transparent 50.5%);
    background-size: 20px 20px;  
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
}

.colored-earth {
    position: absolute;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 50% 50%,
            #4B90E6 0%,
            #2E75BC 40%,
            #1B4C7E 100%
        );
    opacity: 0;
    transition: opacity 0.5s ease;
}

.taiwan-3d {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 85%;
    height: 85%;
    opacity: 0;
    transition: all 1s ease;
    transform-style: preserve-3d;
    animation: none;
    z-index: 2; /* Add this line to ensure text appears above liquid */
}

.taiwan-3d.show {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
}

.school-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffffff; /* Pure white color */
    font-size: 48px;
    text-align: center;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    text-shadow: 
        0 0 10px rgba(255, 255, 255, 0.8),
        0 0 20px rgba(255, 255, 255, 0.6),
        0 0 30px rgba(0, 255, 255, 0.8); /* Added multiple layers of text shadow for better visibility */
    animation: gentleSway 2s ease-in-out infinite;
    transform-style: preserve-3d;
    backface-visibility: hidden;
    letter-spacing: 3px; /* Add slight spacing between characters */
    z-index: 3; /* Add this line to ensure text appears above everything */
    transition: color 2s ease, text-shadow 2s ease; /* Added transition for fading effect */
}

.school-text.fade {
    color: rgba(255, 255, 255, 0.3);
    text-shadow: 
        0 0 10px rgba(255, 255, 255, 0.3),
        0 0 20px rgba(255, 255, 255, 0.2),
        0 0 30px rgba(0, 255, 255, 0.3);
}

.ufo {
    position: absolute;
    width: 30px;
    height: 15px;
    background: linear-gradient(180deg, 
        rgba(150, 150, 150, 0.9),
        rgba(200, 200, 200, 0.9));
    border-radius: 50% 50% 20% 20%;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
    filter: drop-shadow(0 0 5px rgba(0, 255, 255, 0.3));
}

.ufo::before {
    content: '';
    position: absolute;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    width: 15px;
    height: 8px;
    background: rgba(100, 200, 255, 0.8);
    border-radius: 50% 50% 0 0;
}

.astronaut {
    position: absolute;
    width: 20px;
    height: 25px;
    background: linear-gradient(180deg, 
        rgba(255, 255, 255, 0.9),
        rgba(200, 200, 200, 0.9));
    border-radius: 50% 50% 40% 40%;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
}

.astronaut::before {
    content: '';
    position: absolute;
    top: 5px;
    left: 5px;
    width: 10px;
    height: 10px;
    background: rgba(0, 150, 255, 0.6);
    border-radius: 50%;
}

@keyframes floatAcross {
    0% {
        transform: translate(-100vw, 0) rotate(0deg);
    }
    100% {
        transform: translate(200vw, 0) rotate(360deg);
    }
}

@keyframes astronautFloat {
    0% {
        transform: translate(-100vw, 0) rotate(0deg) translateY(0);
    }
    50% {
        transform: translate(50vw, -20px) rotate(180deg) translateY(-10px);
    }
    100% {
        transform: translate(200vw, 0) rotate(360deg) translateY(0);
    }
}

@keyframes alienFloat {
    0% {
        transform: translate(-100vw, 0) rotate(0deg) translateY(0);
    }
    25% {
        transform: translate(25vw, -30px) rotate(90deg) translateY(-15px);
    }
    75% {
        transform: translate(125vw, 30px) rotate(270deg) translateY(15px);
    }
    100% {
        transform: translate(200vw, 0) rotate(360deg) translateY(0);
    }
}

@keyframes gentleSway {
    0% {
        transform: translate(-50%, -50%) translateX(-10px);
    }
    50% {
        transform: translate(-50%, -50%) translateX(10px);
    }
    100% {
        transform: translate(-50%, -50%) translateX(-10px);
    }
}

.rocket {
    position: absolute;
    width: 12px;     /* Changed from 30px (60% smaller) */
    height: 24px;    /* Changed from 60px (60% smaller) */
    background: linear-gradient(180deg, 
        rgba(200, 200, 200, 0.9),
        rgba(150, 150, 150, 0.9));
    border-radius: 50% 50% 20% 20%;
    box-shadow: 0 0 10px rgba(255, 100, 0, 0.5);
    transform-origin: center;
}

.rocket::before {
    content: '';
    position: absolute;
    bottom: -8px;    /* Changed from -20px (60% smaller) */
    left: 50%;
    transform: translateX(-50%);
    width: 4px;      /* Changed from 10px (60% smaller) */
    height: 12px;    /* Changed from 30px (60% smaller) */
    background: linear-gradient(0deg, 
        rgba(255, 50, 0, 0.1),
        rgba(255, 100, 0, 0.5),
        rgba(255, 200, 0, 0.8));
    border-radius: 0 0 50% 50%;
    animation: flameFlicker 0.1s infinite alternate;
}

.rocket::after {
    content: '';
    position: absolute;
    top: 4px;        /* Changed from 10px (60% smaller) */
    left: -4px;      /* Changed from -10px (60% smaller) */
    width: 20px;     /* Changed from 50px (60% smaller) */
    height: 6px;     /* Changed from 15px (60% smaller) */
    background: linear-gradient(90deg, 
        rgba(150, 150, 150, 0.9),
        rgba(200, 200, 200, 0.9));
    border-radius: 5px;
}

/* Update the success text background style */
.success-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffffff;
    font-size: 72px; /* Increased size since it's horizontal */
    text-align: center;
    font-family: 'Michroma', sans-serif;
    text-shadow: 
        0 0 10px rgba(255, 255, 255, 0.6),
        0 0 15px rgba(0, 255, 255, 0.4); /* Reduced glow effect */
    opacity: 0;
    transition: all 1s ease;
    z-index: 1000;
    font-weight: bold;
    letter-spacing: 8px; /* Increased letter spacing */
    background: linear-gradient(45deg,
        rgba(0, 0, 0, 0.75),  /* Darker, more transparent background */
        rgba(25, 0, 51, 0.8),
        rgba(51, 0, 102, 0.75)
    );
    padding: 30px 50px; /* Increased padding */
    border-radius: 10px; /* Added subtle rounded corners */
    box-shadow: 
        0 0 20px rgba(0, 255, 255, 0.15),  /* Reduced glow */
        inset 0 0 15px rgba(255, 255, 255, 0.1);  /* Subtle inner glow */
    white-space: nowrap;
    backdrop-filter: blur(5px); /* Optional: adds slight blur to background */
}

.bubble {
    position: absolute;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 50%;
    animation: bubbleRise 4s ease-in-out;
    pointer-events: none;
}

@keyframes bubbleRise {
    0% {
        transform: translateY(0) scale(1);
        opacity: 0.7;
    }
    100% {
        transform: translateY(-200px) scale(1.5);
        opacity: 0;
    }
}

.success-text.show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

/* Add styles for the percentage counter */
.percentage-counter {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffffff;
    font-size: 48px;
    font-family: 'Orbitron', sans-serif;
    text-align: center;
    opacity: 0;
    transition: opacity 0.5s ease;
    z-index: 4;
    text-shadow: 
        0 0 10px rgba(0, 255, 255, 0.8),
        0 0 20px rgba(0, 255, 255, 0.4);
    pointer-events: none;
}

.percentage-counter.show {
    opacity: 1;
}

/* Add styles for floating words */
.floating-word {
    position: absolute;
    color: #fff;
    font-family: 'Orbitron', sans-serif;
    font-size: 16px;
    text-shadow: 
        0 0 10px rgba(0, 255, 255, 0.8),
        0 0 20px rgba(0, 255, 255, 0.4);
    white-space: nowrap;
    pointer-events: none;
    z-index: 1000;
    letter-spacing: 2px;
    opacity: 0.8;
}

@keyframes wordFloat {
    0% {
        transform: translateX(-100vw) scale(1);
        opacity: 0;
    }
    10% {
        opacity: 0.8;
    }
    90% {
        opacity: 0.8;
    }
    100% {
        transform: translateX(100vw) scale(1.2);
        opacity: 0;
    }
}

/* Update the start-button styles to be more 3D */
.start-button {
    position: absolute;
    top: 120%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 15px 60px;
    font-size: 24px;
    font-family: 'Orbitron', sans-serif;
    color: #fff;
    background: linear-gradient(90deg,
        rgba(0, 0, 0, 0.8),
        rgba(25, 0, 51, 0.9),
        rgba(51, 0, 102, 0.8),
        rgba(25, 0, 51, 0.9),
        rgba(0, 0, 0, 0.8)
    );
    background-size: 400% 100%;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-shadow: 0 0 10px rgba(0, 255, 255, 0.4);
    letter-spacing: 2px;
    animation: buttonGradientFlow 8s linear infinite;
    min-width: 200px;

    /* Add 3D effects */
    box-shadow: 
        0 6px 0 rgba(0, 0, 0, 0.5),
        0 8px 10px rgba(0, 0, 0, 0.6),
        0 0 20px rgba(0, 255, 255, 0.2),
        inset 0 -2px 15px rgba(0, 0, 0, 0.5),
        inset 0 2px 15px rgba(255, 255, 255, 0.2);
    transform-style: preserve-3d;
    perspective: 1000px;
}

.start-button:hover {
    background: linear-gradient(90deg,
        rgba(25, 0, 51, 0.9),
        rgba(51, 0, 102, 1),
        rgba(76, 0, 153, 0.9),
        rgba(51, 0, 102, 1),
        rgba(25, 0, 51, 0.9)
    );
    background-size: 400% 100%;
    transform: translate(-50%, -50%) scale(1.05) translateY(-2px);
    box-shadow: 
        0 8px 0 rgba(0, 0, 0, 0.5),
        0 12px 15px rgba(0, 0, 0, 0.6),
        0 0 30px rgba(0, 255, 255, 0.3),
        inset 0 -2px 15px rgba(0, 0, 0, 0.5),
        inset 0 2px 15px rgba(255, 255, 255, 0.3);
}

.start-button:active {
    transform: translate(-50%, -50%) scale(0.95) translateY(4px);
    box-shadow: 
        0 2px 0 rgba(0, 0, 0, 0.5),
        0 4px 5px rgba(0, 0, 0, 0.6),
        0 0 15px rgba(0, 255, 255, 0.2),
        inset 0 -2px 15px rgba(0, 0, 0, 0.5),
        inset 0 2px 15px rgba(255, 255, 255, 0.2);
}
</style>
<audio id="backgroundMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/24/audio_ffdb8aac2c.mp3" type="audio/mp3">
</audio>

<audio id="rocketSound">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/25/audio_8eb4562a62.mp3" type="audio/mp3">
</audio>

<audio id="successSound">
    <source src="https://cdn.pixabay.com/download/audio/2021/08/09/audio_fbd0390545.mp3" type="audio/mp3">
</audio>

<audio id="ufoSound">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3" type="audio/mp3">
</audio>
</head>
<body>

<div class="background">
    <div class="aurora"></div>
    <div class="grid"></div>
</div>

<div class="loading-container">
    <div class="sound-waves">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>
    <div class="title">XR數位共學中心</div>
    <div class="subtitle">高雄市立英明國民中學</div>
    <div class="glass">
        <div class="earth-container">
            <div class="earth-texture"></div>
            <div class="earth-grid"></div>
            <div class="continents"></div>
            <div class="colored-earth"></div>
            <div class="taiwan-3d">
                <div class="school-text">英明國中</div>
            </div>
        </div>
        <div class="liquid"></div>
        <div class="overflow"></div>
        <div class="percentage-counter">0%</div>
    </div>
    <button class="start-button">開始</button>
</div>

<div class="success-text">揭牌成功</div>

<script>
const startButton = document.querySelector('.start-button');
let isAnimating = false;

let progress = 0;
let isPaused = false;
let progressInterval;
const liquid = document.querySelector('.liquid');
const coloredEarth = document.querySelector('.colored-earth');
const overflow = document.querySelector('.overflow');
const taiwan3d = document.querySelector('.taiwan-3d');
const earthGrid = document.querySelector('.earth-grid');
const duration = 95000; // 95 seconds
const interval = 200;   // Update every 200ms
const steps = duration / interval;
const incrementPerStep = (100 / steps) * 0.7; // Reduce base increment to account for random additions

function createStars() {
    const background = document.querySelector('.background');
    for (let i = 0; i < 200; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + 'vw';
        star.style.top = Math.random() * 100 + 'vh';
        star.style.width = Math.random() * 4 + 'px';
        star.style.height = star.style.width;
        star.style.animationDelay = Math.random() * 1.5 + 's';
        background.appendChild(star);
    }
}

function createShootingStar() {
    const star = document.createElement('div');
    star.className = 'shooting-star';
    star.style.left = Math.random() * window.innerWidth + 'px';
    star.style.top = Math.random() * window.innerHeight/2 + 'px';
    document.querySelector('.background').appendChild(star);
    
    setTimeout(() => {
        star.remove();
    }, 2000);
}

function createRocket() {
    playRocketSound(); // Add this line at the start
    const rocket = document.createElement('div');
    rocket.className = 'rocket';
    
    const startX = Math.random() * window.innerWidth - 100;
    const startY = window.innerHeight + 100;
    
    rocket.style.left = `${startX}px`;
    rocket.style.top = `${startY}px`;
    
    const angle = -(30 + Math.random() * 30);
    // Increased duration to 5-8 seconds
    const duration = 5000 + Math.random() * 3000;
    
    // Create a unique animation name for this rocket
    const animationName = `rocketFlight${Math.random().toString(36).substr(2, 9)}`;
    
    // Create and add keyframe animation dynamically
    const styleSheet = document.styleSheets[0];
    const keyframes = `@keyframes ${animationName} {
        0% {
            transform: translate(0, 0) rotate(${angle}deg);
        }
        100% {
            transform: translate(${-100 + Math.random() * 200}vw, -120vh) rotate(${angle}deg);
        }
    }`;
    styleSheet.insertRule(keyframes, styleSheet.cssRules.length);
    
    // Apply the unique animation
    rocket.style.animation = `${animationName} ${duration}ms linear`;
    
    document.querySelector('.background').appendChild(rocket);
    
    // Clean up the rocket and its animation rule after animation completes
    setTimeout(() => {
        rocket.remove();
        for (let i = 0; i < styleSheet.cssRules.length; i++) {
            if (styleSheet.cssRules[i].name === animationName) {
                styleSheet.deleteRule(i);
                break;
            }
        }
    }, duration);
}

function createUFO() {
    playUFOSound(); // Add this line at the start
    const ufo = document.createElement('div');
    ufo.className = 'ufo';
    
    const yPos = Math.random() * (window.innerHeight / 2);
    ufo.style.top = `${yPos}px`;
    
    // Increased duration to 8-12 seconds
    const duration = 8000 + Math.random() * 4000;
    
    ufo.style.animation = `floatAcross ${duration}ms linear`;
    
    document.querySelector('.background').appendChild(ufo);
    
    setTimeout(() => {
        ufo.remove();
    }, duration);
}

function createAstronaut() {
    const astronaut = document.createElement('div');
    astronaut.className = 'astronaut';
    
    const yPos = Math.random() * (window.innerHeight / 2);
    astronaut.style.top = `${yPos}px`;
    
    // Increased duration to 12-16 seconds
    const duration = 12000 + Math.random() * 4000;
    
    astronaut.style.animation = `astronautFloat ${duration}ms linear`;
    
    document.querySelector('.background').appendChild(astronaut);
    
    setTimeout(() => {
        astronaut.remove();
    }, duration);
}

function createAlien() {
    const alien = document.createElement('div');
    alien.className = 'alien';
    
    const yPos = Math.random() * (window.innerHeight / 2);
    alien.style.top = `${yPos}px`;
    
    // Increased duration to 10-14 seconds
    const duration = 10000 + Math.random() * 4000;
    
    alien.style.animation = `alienFloat ${duration}ms linear`;
    
    document.querySelector('.background').appendChild(alien);
    
    setTimeout(() => {
        alien.remove();
    }, duration);
}

// Add this function to create floating educational words
function createFloatingWord() {
    const words = [
        "教育創新", "數位學習", "虛擬實境", "擴增實境",
        "科技融入", "創意思考", "智慧教室", "跨域學習",
        "人工智慧", "元宇宙", "創客教育", "程式設計",
        "數位素養", "雲端學習", "科技教育", "探究實作",
        "互動學習", "智慧教學", "數位轉型", "創新教學",
        "數位教育", "未來學習", "科技素養", "跨界整合",
        "教學創新", "自主學習", "智慧校園", "教育科技",
        "學習力", "數位工具", "課程創新", "實境科技"
    ];
    
    const word = document.createElement('div');
    word.className = 'floating-word';
    word.textContent = words[Math.floor(Math.random() * words.length)];
    
    // Random position in upper half of screen
    const yPos = Math.random() * (window.innerHeight / 2);
    word.style.top = `${yPos}px`;
    
    // Longer duration for slower movement
    const duration = 12000 + Math.random() * 4000;
    
    word.style.animation = `wordFloat ${duration}ms linear`;
    
    document.querySelector('.background').appendChild(word);
    
    setTimeout(() => {
        word.remove();
    }, duration);
}

function createBubbles() {
    if (progress < 100 && !isPaused) {
        const liquid = document.querySelector('.liquid');
        const bubbleCount = 2 + Math.floor(Math.random() * 3); // Create 2-4 bubbles at once
        
        for (let i = 0; i < bubbleCount; i++) {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            // Random bubble size between 4px and 8px
            const size = 4 + Math.random() * 4;
            bubble.style.width = `${size}px`;
            bubble.style.height = `${size}px`;
            
            // Random position along the liquid width
            const left = Math.random() * 100;
            bubble.style.left = `${left}%`;
            
            // Start from current liquid height
            const liquidHeight = liquid.offsetHeight;
            bubble.style.bottom = `${Math.random() * liquidHeight}px`;
            
            liquid.appendChild(bubble);
            
            // Remove bubble after animation
            setTimeout(() => {
                bubble.remove();
            }, 4000);
        }
    }
}

function createPlanet() {
    const planet = document.createElement('div');
    planet.className = 'planet';
    
    const yPos = Math.random() * (window.innerHeight / 2);
    planet.style.top = `${yPos}px`;
    
    const duration = 8000 + Math.random() * 4000;
    planet.style.animation = `planetFloat ${duration}ms linear`;
    
    document.querySelector('.background').appendChild(planet);
    
    setTimeout(() => {
        planet.remove();
    }, duration);
}

function createMeteor() {
    const meteor = document.createElement('div');
    meteor.className = 'meteor';
    
    const startX = Math.random() * window.innerWidth;
    meteor.style.left = `${startX}px`;
    
    const duration = 4000 + Math.random() * 2000;
    meteor.style.animation = `meteorFloat ${duration}ms linear`;
    
    document.querySelector('.background').appendChild(meteor);
    
    setTimeout(() => {
        meteor.remove();
    }, duration);
}

function playBackgroundMusic() {
    const music = document.getElementById('backgroundMusic');
    music.volume = 0.3; // Set volume to 30%
    music.play().catch(e => console.log("Autoplay prevented"));
}

function playRocketSound() {
    const sound = document.getElementById('rocketSound');
    sound.volume = 0.2;
    sound.currentTime = 0;
    sound.play().catch(e => console.log("Sound play prevented"));
}

function playUFOSound() {
    const sound = document.getElementById('ufoSound');
    sound.volume = 0.1;
    sound.currentTime = 0;
    sound.play().catch(e => console.log("Sound play prevented"));
}

function playSuccessSound() {
    const sound = document.getElementById('successSound');
    sound.volume = 0.4;
    sound.currentTime = 0;
    sound.play().catch(e => console.log("Sound play prevented"));
}

// Add this function to control wave visibility based on progress
function updateWaves(show) {
    const waves = document.querySelectorAll('.wave');
    waves.forEach(wave => {
        wave.style.display = show ? 'block' : 'none';
    });
}

function updateProgress() {
    if (isPaused) return;
    
    // Show waves when progress is happening
    updateWaves(true);
    
    // Add random increment between 1-3%
    const randomIncrement = incrementPerStep + (Math.random() * 2 * incrementPerStep);
    progress += randomIncrement;

    if (progress > 100) {
        progress = 100;
        clearInterval(progressInterval);
        overflow.style.animationPlayState = 'running';
        taiwan3d.classList.add('show');
        updateWaves(false); // Hide waves when complete
        
        // Hide percentage counter immediately when reaching 100%
        const percentageCounter = document.querySelector('.percentage-counter');
        percentageCounter.style.opacity = '0';
        percentageCounter.classList.remove('show');
        
        setTimeout(() => {
            playSuccessSound();
            const successText = document.querySelector('.success-text');
            const schoolText = document.querySelector('.school-text');
            successText.style.opacity = '1';
            successText.classList.add('show');
            schoolText.classList.add('fade');
            
            setTimeout(() => {
                successText.style.opacity = '0';
                schoolText.classList.remove('fade');
            }, 8000);
        }, 500);
    }
    
    liquid.style.height = `${progress}%`;
    coloredEarth.style.opacity = progress / 100;
    earthGrid.style.opacity = progress / 100;
    
    // Update percentage counter
    const percentageCounter = document.querySelector('.percentage-counter');
    percentageCounter.textContent = `${Math.round(progress)}%`;
    if (progress < 100) {
        percentageCounter.classList.add('show');
    }
}

// Modify the startLoading function:
function startLoading() {
    if (isAnimating) return;
    isAnimating = true;
    
    // Show waves at start
    updateWaves(true);
    
    startButton.style.opacity = '0';
    startButton.style.pointerEvents = 'none';
    
    playBackgroundMusic();
    progress = 0;
    liquid.style.height = '0%';
    coloredEarth.style.opacity = '0';
    overflow.style.animationPlayState = 'paused';
    taiwan3d.classList.remove('show');
    const successText = document.querySelector('.success-text');
    const schoolText = document.querySelector('.school-text');
    successText.style.opacity = '0';
    successText.classList.remove('show');
    schoolText.classList.remove('fade');
    
    const percentageCounter = document.querySelector('.percentage-counter');
    percentageCounter.textContent = '0%';
    percentageCounter.classList.remove('show');
    
    clearInterval(progressInterval);
    progressInterval = setInterval(updateProgress, interval);
    
    // Reset button after animation completes
    setTimeout(() => {
        isAnimating = false;
        startButton.style.opacity = '1';
        startButton.style.pointerEvents = 'auto';
    }, 105000); // Changed from 70000 to 105000 (95 seconds + 10 seconds buffer)
}

createStars();
setInterval(createShootingStar, 2000);
setInterval(createUFO, 4000);
setInterval(createAstronaut, 5000);
setInterval(createAlien, 4500);
setInterval(createPlanet, 3500);
setInterval(createMeteor, 3000);
setInterval(createBubbles, 200);
setInterval(createFloatingWord, 4000);
playBackgroundMusic();

// Add click event listener for the start button
startButton.addEventListener('click', startLoading);
</script>

</body></html>